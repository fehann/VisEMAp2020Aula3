<!DOCTYPE html>
<html>
<head>
	<title>My first Canvas</title>
	<script src="https://cdn.jsdelivr.net/npm/vega@5.16.1"></script>
	<script src="https://cdn.jsdelivr.net/npm/vega-lite@4.16.8"></script>
	<script src="https://cdn.jsdelivr.net/npm/vega-embed@6.12.2"></script>
</head>
<body>
	<h1 id="main-heading"> Trabalho 3 - Fernando Hannaka </h1>
	<h2><p> Meu <em>primeiro</em> <strong>canvas</strong> </p></h2>
	<canvas id="canvas_teste" width = "400" height = "200"></canvas>

	<script>
		var canvas = document.getElementById("canvas_teste");
		var ctx = canvas.getContext("2d");

		ctx.fillStyle = "rgb(200,0,0)";
        ctx.fillRect (10, 60, 20, 50);

		ctx.fillStyle = "rgb(200,0,0)";
		    ctx.fillRect (40, 60 + 25, 20, 25);

		ctx.fillStyle = "rgb(200,0,0)";
				ctx.fillRect (70, 60 + 40, 20, 10);

		ctx.strokeStyle = "Black";
		ctx.lineWidth = 4;
        ctx.strokeRect (5, 40, 90, 90);

		ctx.fillStyle = "rgba(0, 200, 0, 0.3)";
		for (var i = 0; i < 8; i++) {
			ctx.fillRect(120+ i * 30, 10 + 10  * i, 20, 30 + 10 * i);
		}
	</script>

	<!-- Um exemplo de svg sendo inserido inline -->
	<h2>SVG inline</h2>

	<p>Segue o SVG da imagem do quarteto de Anscombe do Trabalho 2.</p>

	<canvas id="canvas" width="0" height="0"></canvas>
	<img id="art" width="800" height="800" src="https://fehann.github.io/VisEMAp2020/Viz1.svg">
	<script>
		var canvas = document.getElementById("canvas"),
		var ctx = canvas.getContext("2d"),
		image = document.getElementById("art");
		ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
	</script>

	<p>O SVG é uma especificação XML interpretada pelo padrão HTML5.
	Portanto, podemos escrever o SVG diretamente no HTML para ser interpretado pelo browser.</p>

	<svg id="linha">
	  <line
		id="a_linha"
	      x1="40" y1="30"
	      x2="100" y2="30"
		stroke="black"/>
		<line
		id="b_linha"
	      x1="100" y1="30"
	      x2="160" y2="30"
		stroke="black"/>
		<circle
			id="ponto_inicial"
			cx="40" cy="30" r="8"
			fill="#529fca"
			stroke="black" />
		<circle
			id="ponto_meio"
			cx="100" cy="30" r="8"
			fill="#529fca"
			stroke="black"/>
		<circle
			id="ponto_final"
			cx="160" cy="30" r="8"
			fill="#529fca"
			stroke="black"/>
  </svg>

	<script>
			document.getElementById('ponto_meio').setAttribute('fill', 'red');
	</script>

<!-- Um exemplo de svg importado de banco de imagens -->
	<p> Com frequência é conveniente utilizar softwares especializados para desenhar figuras mais
	complexas com primitivas gráficas. A seguinte figura foi obtida do seguinte site:
	<a href="http://svgicons.sparkk.fr/">SVG Icons</a>.</p>

	<svg class="svg-icon"
		x="0px" y="0px" width="47px" height="47px"
		viewBox="0 0 47 47">
		<path d="M15.94,10.179l-2.437-0.325l1.62-7.379c0.047-0.235-0.132-0.458-0.372-0.458H5.25c-0.241,0-0.42,0.223-0.373,0.458l1.634,7.376L4.06,10.179c-0.312,0.041-0.446,0.425-0.214,0.649l2.864,2.759l-0.724,3.947c-0.058,0.315,0.277,0.554,0.559,0.401l3.457-1.916l3.456,1.916c-0.419-0.238,0.56,0.439,0.56-0.401l-0.725-3.947l2.863-2.759C16.388,10.604,16.254,10.22,15.94,10.179M10.381,2.778h3.902l-1.536,6.977L12.036,9.66l-1.655-3.546V2.778z M5.717,2.778h3.903v3.335L7.965,9.66L7.268,9.753L5.717,2.778zM12.618,13.182c-0.092,0.088-0.134,0.217-0.11,0.343l0.615,3.356l-2.938-1.629c-0.057-0.03-0.122-0.048-0.184-0.048c-0.063,0-0.128,0.018-0.185,0.048l-2.938,1.629l0.616-3.356c0.022-0.126-0.019-0.255-0.11-0.343l-2.441-2.354l3.329-0.441c0.128-0.017,0.24-0.099,0.295-0.215l1.435-3.073l1.435,3.073c0.055,0.116,0.167,0.198,0.294,0.215l3.329,0.441L12.618,13.182z"></path>
	</svg>

	<!-- Um exemplo de vega -->
	<h2>Visualização Vega</h2>

	<p>Segue visualização interativa em Vega do quarteto de Anscombe do Trabalho 2.</p>

	<div id="vis"></div>

	<script type="text/javascript">
		var yourVlSpec = {
			"$schema": "https://vega.github.io/schema/vega/v5.json",
			"background": "white",
			"padding": 5,
			"title": {
				"anchor": "middle",
				"text": "Quarteto de Anscombe"
			},
			"data": [
				{
					"name": "selector016_store"
				},
				{
					"name": "data-88283bd21553e8f511839ecc1a78b552",
					"values": [
						{
							"Category": "I",
							"x": 10,
							"y": 8.04
						},
						{
							"Category": "I",
							"x": 8,
							"y": 6.95
						},
						{
							"Category": "I",
							"x": 13,
							"y": 7.58
						},
						{
							"Category": "I",
							"x": 9,
							"y": 8.81
						},
						{
							"Category": "I",
							"x": 11,
							"y": 8.33
						},
						{
							"Category": "I",
							"x": 14,
							"y": 9.96
						},
						{
							"Category": "I",
							"x": 6,
							"y": 7.24
						},
						{
							"Category": "I",
							"x": 4,
							"y": 4.26
						},
						{
							"Category": "I",
							"x": 12,
							"y": 10.84
						},
						{
							"Category": "I",
							"x": 7,
							"y": 4.82
						},
						{
							"Category": "I",
							"x": 5,
							"y": 5.68
						},
						{
							"Category": "II",
							"x": 10,
							"y": 9.14
						},
						{
							"Category": "II",
							"x": 8,
							"y": 8.14
						},
						{
							"Category": "II",
							"x": 13,
							"y": 8.74
						},
						{
							"Category": "II",
							"x": 9,
							"y": 8.77
						},
						{
							"Category": "II",
							"x": 11,
							"y": 9.26
						},
						{
							"Category": "II",
							"x": 14,
							"y": 8.1
						},
						{
							"Category": "II",
							"x": 6,
							"y": 6.13
						},
						{
							"Category": "II",
							"x": 4,
							"y": 3.1
						},
						{
							"Category": "II",
							"x": 12,
							"y": 9.13
						},
						{
							"Category": "II",
							"x": 7,
							"y": 7.26
						},
						{
							"Category": "II",
							"x": 5,
							"y": 4.74
						},
						{
							"Category": "III",
							"x": 10,
							"y": 7.46
						},
						{
							"Category": "III",
							"x": 8,
							"y": 6.77
						},
						{
							"Category": "III",
							"x": 13,
							"y": 12.74
						},
						{
							"Category": "III",
							"x": 9,
							"y": 7.11
						},
						{
							"Category": "III",
							"x": 11,
							"y": 7.81
						},
						{
							"Category": "III",
							"x": 14,
							"y": 8.84
						},
						{
							"Category": "III",
							"x": 6,
							"y": 6.08
						},
						{
							"Category": "III",
							"x": 4,
							"y": 5.39
						},
						{
							"Category": "III",
							"x": 12,
							"y": 8.15
						},
						{
							"Category": "III",
							"x": 7,
							"y": 6.42
						},
						{
							"Category": "III",
							"x": 5,
							"y": 5.73
						},
						{
							"Category": "IV",
							"x": 8,
							"y": 6.58
						},
						{
							"Category": "IV",
							"x": 8,
							"y": 5.76
						},
						{
							"Category": "IV",
							"x": 8,
							"y": 7.71
						},
						{
							"Category": "IV",
							"x": 8,
							"y": 8.84
						},
						{
							"Category": "IV",
							"x": 8,
							"y": 8.47
						},
						{
							"Category": "IV",
							"x": 8,
							"y": 7.04
						},
						{
							"Category": "IV",
							"x": 8,
							"y": 5.25
						},
						{
							"Category": "IV",
							"x": 19,
							"y": 12.5
						},
						{
							"Category": "IV",
							"x": 8,
							"y": 5.56
						},
						{
							"Category": "IV",
							"x": 8,
							"y": 7.91
						},
						{
							"Category": "IV",
							"x": 8,
							"y": 6.89
						}
					]
				},
				{
					"name": "data_1",
					"source": "data-88283bd21553e8f511839ecc1a78b552",
					"transform": [
						{
							"type": "filter",
							"expr": "isValid(datum[\"y\"]) && isFinite(+datum[\"y\"])"
						}
					]
				},
				{
					"name": "data_2",
					"source": "data-88283bd21553e8f511839ecc1a78b552",
					"transform": [
						{
							"type": "filter",
							"expr": "isValid(datum[\"x\"]) && isFinite(+datum[\"x\"]) && isValid(datum[\"y\"]) && isFinite(+datum[\"y\"])"
						}
					]
				},
				{
					"name": "data_3",
					"source": "data-88283bd21553e8f511839ecc1a78b552",
					"transform": [
						{
							"type": "filter",
							"expr": "isValid(datum[\"x\"]) && isFinite(+datum[\"x\"])"
						}
					]
				}
			],
			"signals": [
				{
					"name": "concat_0_x_step",
					"value": 20
				},
				{
					"name": "concat_0_width",
					"update": "bandspace(domain('concat_0_x').length, 1, 0.5) * concat_0_x_step"
				},
				{
					"name": "concat_0_height",
					"value": 300
				},
				{
					"name": "concat_1_width",
					"value": 400
				},
				{
					"name": "concat_1_concat_0_height",
					"value": 300
				},
				{
					"name": "concat_1_concat_1_y_step",
					"value": 20
				},
				{
					"name": "concat_1_concat_1_height",
					"update": "bandspace(domain('concat_1_concat_1_y').length, 1, 0.5) * concat_1_concat_1_y_step"
				},
				{
					"name": "unit",
					"value": {},
					"on": [
						{
							"events": "mousemove",
							"update": "isTuple(group()) ? group() : unit"
						}
					]
				},
				{
					"name": "selector016",
					"update": "vlSelectionResolve(\"selector016_store\", \"union\")"
				}
			],
			"layout": {
				"padding": 20,
				"bounds": "full",
				"align": "each"
			},
			"marks": [
				{
					"type": "group",
					"name": "concat_0_group",
					"style": "cell",
					"encode": {
						"update": {
							"width": {
								"signal": "concat_0_width"
							},
							"height": {
								"signal": "concat_0_height"
							}
						}
					},
					"signals": [
						{
							"name": "selector016_tuple",
							"on": [
								{
									"events": [
										{
											"source": "scope",
											"type": "click"
										}
									],
									"update": "datum && item().mark.marktype !== 'group' ? {unit: \"concat_0\", fields: selector016_tuple_fields, values: [(item().isVoronoi ? datum.datum : datum)[\"Category\"]]} : null",
									"force": true
								},
								{
									"events": [
										{
											"source": "scope",
											"type": "dblclick"
										}
									],
									"update": "null"
								}
							]
						},
						{
							"name": "selector016_tuple_fields",
							"value": [
								{
									"type": "E",
									"field": "Category"
								}
							]
						},
						{
							"name": "selector016_modify",
							"on": [
								{
									"events": {
										"signal": "selector016_tuple"
									},
									"update": "modify(\"selector016_store\", selector016_tuple, true)"
								}
							]
						}
					],
					"marks": [
						{
							"name": "concat_0_marks",
							"type": "rect",
							"style": [
								"tick"
							],
							"interactive": true,
							"from": {
								"data": "data_1"
							},
							"encode": {
								"update": {
									"opacity": {
										"value": 0.7
									},
									"fill": [
										{
											"test": "!(length(data(\"selector016_store\"))) || (vlSelectionTest(\"selector016_store\", datum))",
											"scale": "color",
											"field": "Category"
										},
										{
											"value": "lightgrey"
										}
									],
									"ariaRoleDescription": {
										"value": "tick"
									},
									"description": {
										"signal": "\"Category: \" + (isValid(datum[\"Category\"]) ? datum[\"Category\"] : \"\"+datum[\"Category\"]) + \"; y: \" + (format(datum[\"y\"], \"\"))"
									},
									"xc": {
										"scale": "concat_0_x",
										"field": "Category"
									},
									"yc": {
										"scale": "concat_0_y",
										"field": "y"
									},
									"width": {
										"value": 15
									},
									"height": {
										"value": 1
									}
								}
							}
						}
					],
					"axes": [
						{
							"scale": "concat_0_y",
							"orient": "left",
							"gridScale": "concat_0_x",
							"grid": true,
							"tickCount": {
								"signal": "ceil(concat_0_height/40)"
							},
							"domain": false,
							"labels": false,
							"aria": false,
							"maxExtent": 0,
							"minExtent": 0,
							"ticks": false,
							"zindex": 0
						},
						{
							"scale": "concat_0_x",
							"orient": "bottom",
							"grid": false,
							"domain": false,
							"labels": false,
							"ticks": false,
							"labelAlign": "right",
							"labelAngle": 270,
							"labelBaseline": "middle",
							"zindex": 0
						},
						{
							"scale": "concat_0_y",
							"orient": "left",
							"grid": false,
							"title": "y",
							"domain": false,
							"labels": false,
							"ticks": false,
							"labelOverlap": true,
							"tickCount": {
								"signal": "ceil(concat_0_height/40)"
							},
							"zindex": 0
						}
					]
				},
				{
					"type": "group",
					"name": "concat_1_group",
					"layout": {
						"padding": 20,
						"columns": 1,
						"bounds": "full",
						"align": "each"
					},
					"marks": [
						{
							"type": "group",
							"name": "concat_1_concat_0_group",
							"style": "cell",
							"encode": {
								"update": {
									"width": {
										"signal": "concat_1_width"
									},
									"height": {
										"signal": "concat_1_concat_0_height"
									}
								}
							},
							"signals": [
								{
									"name": "selector016_tuple",
									"on": [
										{
											"events": [
												{
													"source": "scope",
													"type": "click"
												}
											],
											"update": "datum && item().mark.marktype !== 'group' ? {unit: \"concat_1_concat_0\", fields: selector016_tuple_fields, values: [(item().isVoronoi ? datum.datum : datum)[\"Category\"]]} : null",
											"force": true
										},
										{
											"events": [
												{
													"source": "scope",
													"type": "dblclick"
												}
											],
											"update": "null"
										}
									]
								},
								{
									"name": "selector016_tuple_fields",
									"value": [
										{
											"type": "E",
											"field": "Category"
										}
									]
								},
								{
									"name": "selector016_modify",
									"on": [
										{
											"events": {
												"signal": "selector016_tuple"
											},
											"update": "modify(\"selector016_store\", selector016_tuple, true)"
										}
									]
								}
							],
							"marks": [
								{
									"name": "concat_1_concat_0_marks",
									"type": "symbol",
									"style": [
										"circle"
									],
									"interactive": true,
									"from": {
										"data": "data_2"
									},
									"encode": {
										"update": {
											"opacity": {
												"value": 0.7
											},
											"size": {
												"value": 60
											},
											"fill": [
												{
													"test": "!(length(data(\"selector016_store\"))) || (vlSelectionTest(\"selector016_store\", datum))",
													"scale": "color",
													"field": "Category"
												},
												{
													"value": "lightgrey"
												}
											],
											"ariaRoleDescription": {
												"value": "circle"
											},
											"description": {
												"signal": "\"Category: \" + (isValid(datum[\"Category\"]) ? datum[\"Category\"] : \"\"+datum[\"Category\"]) + \"; x: \" + (format(datum[\"x\"], \"\")) + \"; y: \" + (format(datum[\"y\"], \"\"))"
											},
											"x": {
												"scale": "concat_1_concat_0_x",
												"field": "x"
											},
											"y": {
												"scale": "concat_1_concat_0_y",
												"field": "y"
											},
											"shape": {
												"value": "circle"
											}
										}
									}
								}
							],
							"axes": [
								{
									"scale": "concat_1_concat_0_x",
									"orient": "bottom",
									"gridScale": "concat_1_concat_0_y",
									"grid": true,
									"tickCount": {
										"signal": "ceil(concat_1_width/40)"
									},
									"domain": false,
									"labels": false,
									"aria": false,
									"maxExtent": 0,
									"minExtent": 0,
									"ticks": false,
									"zindex": 0
								},
								{
									"scale": "concat_1_concat_0_y",
									"orient": "left",
									"gridScale": "concat_1_concat_0_x",
									"grid": true,
									"tickCount": {
										"signal": "ceil(concat_1_concat_0_height/40)"
									},
									"domain": false,
									"labels": false,
									"aria": false,
									"maxExtent": 0,
									"minExtent": 0,
									"ticks": false,
									"zindex": 0
								},
								{
									"scale": "concat_1_concat_0_x",
									"orient": "bottom",
									"grid": false,
									"labelFlush": true,
									"labelOverlap": true,
									"tickCount": {
										"signal": "ceil(concat_1_width/40)"
									},
									"zindex": 0
								},
								{
									"scale": "concat_1_concat_0_y",
									"orient": "left",
									"grid": false,
									"labelOverlap": true,
									"tickCount": {
										"signal": "ceil(concat_1_concat_0_height/40)"
									},
									"zindex": 0
								}
							]
						},
						{
							"type": "group",
							"name": "concat_1_concat_1_group",
							"style": "cell",
							"encode": {
								"update": {
									"width": {
										"signal": "concat_1_width"
									},
									"height": {
										"signal": "concat_1_concat_1_height"
									}
								}
							},
							"signals": [
								{
									"name": "selector016_tuple",
									"on": [
										{
											"events": [
												{
													"source": "scope",
													"type": "click"
												}
											],
											"update": "datum && item().mark.marktype !== 'group' ? {unit: \"concat_1_concat_1\", fields: selector016_tuple_fields, values: [(item().isVoronoi ? datum.datum : datum)[\"Category\"]]} : null",
											"force": true
										},
										{
											"events": [
												{
													"source": "scope",
													"type": "dblclick"
												}
											],
											"update": "null"
										}
									]
								},
								{
									"name": "selector016_tuple_fields",
									"value": [
										{
											"type": "E",
											"field": "Category"
										}
									]
								},
								{
									"name": "selector016_modify",
									"on": [
										{
											"events": {
												"signal": "selector016_tuple"
											},
											"update": "modify(\"selector016_store\", selector016_tuple, true)"
										}
									]
								}
							],
							"marks": [
								{
									"name": "concat_1_concat_1_marks",
									"type": "rect",
									"style": [
										"tick"
									],
									"interactive": true,
									"from": {
										"data": "data_3"
									},
									"encode": {
										"update": {
											"opacity": {
												"value": 0.7
											},
											"fill": [
												{
													"test": "!(length(data(\"selector016_store\"))) || (vlSelectionTest(\"selector016_store\", datum))",
													"scale": "color",
													"field": "Category"
												},
												{
													"value": "lightgrey"
												}
											],
											"ariaRoleDescription": {
												"value": "tick"
											},
											"description": {
												"signal": "\"Category: \" + (isValid(datum[\"Category\"]) ? datum[\"Category\"] : \"\"+datum[\"Category\"]) + \"; x: \" + (format(datum[\"x\"], \"\"))"
											},
											"xc": {
												"scale": "concat_1_concat_1_x",
												"field": "x"
											},
											"yc": {
												"scale": "concat_1_concat_1_y",
												"field": "Category"
											},
											"height": {
												"value": 15
											},
											"width": {
												"value": 1
											}
										}
									}
								}
							],
							"axes": [
								{
									"scale": "concat_1_concat_1_x",
									"orient": "bottom",
									"gridScale": "concat_1_concat_1_y",
									"grid": true,
									"tickCount": {
										"signal": "ceil(concat_1_width/40)"
									},
									"domain": false,
									"labels": false,
									"aria": false,
									"maxExtent": 0,
									"minExtent": 0,
									"ticks": false,
									"zindex": 0
								},
								{
									"scale": "concat_1_concat_1_x",
									"orient": "bottom",
									"grid": false,
									"title": "x",
									"domain": false,
									"labels": false,
									"ticks": false,
									"labelFlush": true,
									"labelOverlap": true,
									"tickCount": {
										"signal": "ceil(concat_1_width/40)"
									},
									"zindex": 0
								},
								{
									"scale": "concat_1_concat_1_y",
									"orient": "left",
									"grid": false,
									"domain": false,
									"labels": false,
									"ticks": false,
									"zindex": 0
								}
							]
						}
					]
				}
			],
			"scales": [
				{
					"name": "color",
					"type": "ordinal",
					"domain": {
						"fields": [
							{
								"data": "data_1",
								"field": "Category"
							},
							{
								"data": "data_2",
								"field": "Category"
							},
							{
								"data": "data_3",
								"field": "Category"
							}
						],
						"sort": true
					},
					"range": "category"
				},
				{
					"name": "concat_0_x",
					"type": "point",
					"domain": {
						"data": "data_1",
						"field": "Category",
						"sort": true
					},
					"range": {
						"step": {
							"signal": "concat_0_x_step"
						}
					},
					"padding": 0.5
				},
				{
					"name": "concat_0_y",
					"type": "linear",
					"domain": {
						"data": "data_1",
						"field": "y"
					},
					"range": [
						{
							"signal": "concat_0_height"
						},
						0
					],
					"nice": true,
					"zero": true
				},
				{
					"name": "concat_1_concat_0_x",
					"type": "linear",
					"domain": {
						"data": "data_2",
						"field": "x"
					},
					"range": [
						0,
						{
							"signal": "concat_1_width"
						}
					],
					"nice": true,
					"zero": true
				},
				{
					"name": "concat_1_concat_0_y",
					"type": "linear",
					"domain": {
						"data": "data_2",
						"field": "y"
					},
					"range": [
						{
							"signal": "concat_1_concat_0_height"
						},
						0
					],
					"nice": true,
					"zero": true
				},
				{
					"name": "concat_1_concat_1_x",
					"type": "linear",
					"domain": {
						"data": "data_3",
						"field": "x"
					},
					"range": [
						0,
						{
							"signal": "concat_1_width"
						}
					],
					"nice": true,
					"zero": true
				},
				{
					"name": "concat_1_concat_1_y",
					"type": "point",
					"domain": {
						"data": "data_3",
						"field": "Category",
						"sort": true
					},
					"range": {
						"step": {
							"signal": "concat_1_concat_1_y_step"
						}
					},
					"padding": 0.5
				}
			],
			"legends": [
				{
					"fill": "color",
					"symbolType": "circle",
					"title": "Category",
					"encode": {
						"symbols": {
							"update": {
								"opacity": {
									"value": 0.7
								}
							}
						}
					}
				}
			],
			"config": {
				"style": {
					"group-title": {
						"fontSize": 23
					}
				}
			}
		};
		vegaEmbed('#vis', yourVlSpec);
	</script>


</body>
</html>
